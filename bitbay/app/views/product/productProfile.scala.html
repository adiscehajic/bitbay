@(product: Product)(path: String)(comments:List[Comment])(topComments: List[Comment])
@import helper._

@main("Product") {
		<div class="container" id="wrapper">
			<div class="row">

				<div class="col-md-6">
					<div class="thumbnail">

					@for(image <- product.images) {
						<img class="img-responsive" src="@image.getSize(576,486)" >
					}
					</div>
					<div style="margin-left: 35%">
						<input class="rating" data-max="5" data-min="1" id="some_id" name="your_awesome_parameter" type="number" data-empty-value="0" data-icon-lib="fa" data-active-icon="fa-star fa-2x" data-inactive-icon="fa-star-o fa-2x"/>
					</div>
				</div>
			<div class="col-md-5 " id="userInfo">
				<h2>@product.name</h2>
				<table>
					<tbody>
						<tr class="blank_row"></tr>
						<tr class="blank_row"></tr>

						<tr>
							<td> User: </td>
							@if(session().get("email") != null && (User.getUserByEmail(session().get("email"))).userType.id == 2) {
								<td name="email"><a href="@routes.MessageController.newMessage(product.user.email)" style="text-decoration : none">@product.user.email <span class="glyphicon glyphicon-envelope"></span></a></td>
							} else {
								<td name="email">@product.user.email</td>
							}
						<tr>
							<td> Category: </td>
							<td>@product.category.name</td>
						</tr>
						<tr class="blank_row"></tr>
						<tr>
							<td> <h4> Price:</h4></td>
							<td> <h4>@product.price KM</h4></td>
						</tr>
						<tr class="blank_row"></tr>

						<tr>
							<td> Manifacturer: </td>
							<td>@product.manufacturer</td>
						</tr>
						<tr class="blank_row"></tr>
						<tr>
							<td>Quantity:</td>
							<td>@product.quantity</td>
						</tr>
						<tr>
							<td>Availability:</td>
							<td>Yes</td>
						</tr>
						<tr>
							<td> Payment: </td>
							<td> Paypal </td>
						</tr>
						<tr class="blank_row"></tr>
						<tr class="blank_row"></tr>
						<tr>
							<td>
								@if(session().get("email") != null && (User.getUserByEmail(session().get("email"))).userType.id == 2) {
									<form action="@helper.CSRF(routes.CartController.addToCart(product.id))" method="POST">
										<button type="submit " class="btn btn-primary" style="margin-bottom:20px">
											Add to cart </button>
									</form>
								}
								@if(session().get("email") != null && (User.getUserByEmail(session().get("email"))).userType.id == 3 && product.user.id == User.getUserByEmail(session().get("email")).id) {
									<form action="@routes.ProductController.editProduct(product.id)" method="GET">
										<button type="submit " class="btn btn-primary" style="margin-bottom:20px">
											Edit </button>
									</form>
								}
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="row" >

			<div class="col-md-5 col-md-offset-6" style="margin-top:20px" id="deliveryWrapper">
				<table>
					<tbody>
						<tr>
							<td> Shipping: </td>
							<td> </td>
						</tr>
						<tr>
							<td> Delivery: </td>
							<td> Estimated 10-15 days. </td>
						</tr>
						<tr>
							<td> Returns: </td>
							<td> 60 days money back, buyer pays return shipping </td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="row" >

			<div class="col-md-12">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#about">About</a></li>
					<li><a data-toggle="tab" href="#menu2">Comments (@(comments.size + topComments.size))</a></li>
				</ul>
				<div class="tab-content">
					<div id="about" class="tab-pane fade in active">
						<br><p>@product.description</p>
					</div>
					<div id="menu2" class="tab-pane fade">
						@if(session().get("email") != null && (User.getUserByEmail(session().get("email"))).userType.id == 2 && Comment.hasUserCommented(product)) {
							<div class="page-header">
								<h2> Your Comment </h2>
							</div>
							<div class = "row">
								<form action="@helper.CSRF(routes.CommentController.saveComment(product.id))" method="POST">
									<div class="form-group">
										<label for="usr" style = "margin-top:40px;">Tittle:</label>
										<input type="text" class="form-control" id="usr"  name="title">
										<span class="alert-danger" data-error-for="title" style="display: block;font-weight:normal;"></span>

										<label for="comment" style = "margin-top:30px;">Comment:</label>
										<textarea class="form-control" rows="5" id="comment"  name="text"></textarea>
										<span class="alert-danger" data-error-for="text" style="display: block;font-weight:normal;"></span>
									</div>
									<div class = "row pull-right" >
										<button id="submit-button" type="submit" class="btn btn-primary" style = "margin-right:14px;">Submit</button>
									</div>
									<script>
										var urlPost = "@routes.CommentController.validateFormComment()";
									</script>
									<script src="@routes.Assets.versioned("javascripts/validateForm.js")" type="text/javascript"></script>
								</form>
								<table class="table">
								}
						<thead>

							<tr>

								<th><h3>Top comments</h3></th>
							</tr>
						</thead>
						<tbody>

						@for(comment <- topComments){

							<tr>
								<td>
									<a href=""><h4>@comment.title</h4></a>
									<p class = "person">By @comment.user.firstName @comment.user.lastName on @comment.commentDate</p>
									<p style = "margin-bottom:20px;">@comment.text</p>
									<span style = "margin-right:6px; ">Was this review helpful to you?</span>
									<a id="like@comment.id"> <span id="thumbs-up@comment.id" class="glyphicon glyphicon-thumbs-up" style="padding-right: 10px; font-size: 17px;">@Thumb.getNumberThumbsUp(comment)</span></a>
									<a id="dislike@comment.id"> <span id="thumbs-down@comment.id" class="glyphicon glyphicon-thumbs-down" style="padding-right: 10px; font-size: 17px;">@Thumb.getNumberThumbsDown(comment)</span></a>
								</td>
							</tr>
							<script>

							$(document).ready(function() {
								var comm = @comment.id;
								var thumbUp = "true";
								var thumbDown = "false";
								$("#like" + comm).click(function(e) {
											e.preventDefault();
											$.ajax({
											type: "post",
											url: "@routes.CommentController.saveThumbUp()",
											data: "comm=" + comm + "&thumb=" + thumbUp
										}).success(function(response) {
											console.log(response);
											$("#thumbs-up" + comm).html(response[0]);
											$("#thumbs-down" + comm).html(response[1]);
											$("#like" + comm).css('color', 'grey');
												$("#dislike" + comm).css('color', 'blue');
											})
										})
										$("#dislike" + comm).click(function(e) {
											e.preventDefault();
											$.ajax({
												type: "post",
												url: "@routes.CommentController.saveThumbUp()",
												data: "comm=" + comm + "&thumb=" + thumbDown
											}).success(function(response) {
												$("#thumbs-up" + comm).html(response[0]);
											$("#thumbs-down" + comm).html(response[1]);
												$("#like" + comm).css('color', 'blue');
												$("#dislike" + comm).css('color', 'grey');
											})
										})
											});
										</script>
									}
						</tbody>
					</table>
					<table class="table">
						<thead>
							<tr>
								<th><h3>All comments</h3></th>
							</tr>
						</thead>
						<tbody>
							@for(comment <- comments) {
								<form action="" method="post">
									<tr>
										<td>
											<a href=""><h4>@comment.title</h4></a>
											<p class = "person">By @comment.user.firstName @comment.user.lastName on @comment.commentDate</p>
											<p style = "margin-bottom:20px;">@comment.text</p>
											<span style = "margin-right:6px; ">Was this review helpful to you?</span>

											<a id="like@comment.id"> <span id="thumbs-up@comment.id" class="glyphicon glyphicon-thumbs-up" style="padding-right: 10px; font-size: 17px;">@Thumb.getNumberThumbsUp(comment)</span></a>
											<a id="dislike@comment.id"> <span id="thumbs-down@comment.id" class="glyphicon glyphicon-thumbs-down" style="padding-right: 10px; font-size: 17px;">@Thumb.getNumberThumbsDown(comment)</span></a>
										</td>
									</tr>
								</form>

								<script>
									$(document).ready(function() {
										var comm = @comment.id;
										var thumbUp = "true";
										var thumbDown = "false";
										$("#like" + comm).click(function(e) {
											e.preventDefault();
											$.ajax({
											type: "post",
											url: "@routes.CommentController.saveThumbUp()",
											data: "comm=" + comm + "&thumb=" + thumbUp
										}).success(function(response) {
											console.log(response);
											$("#thumbs-up" + comm).html(response[0]);
											$("#thumbs-down" + comm).html(response[1]);
											$("#like" + comm).css('color', 'grey');
												$("#dislike" + comm).css('color', 'blue');
											})
										})
										$("#dislike" + comm).click(function(e) {
											e.preventDefault();
											$.ajax({
												type: "post",
												url: "@routes.CommentController.saveThumbUp()",
												data: "comm=" + comm + "&thumb=" + thumbDown
											}).success(function(response) {
												$("#thumbs-up" + comm).html(response[0]);
											$("#thumbs-down" + comm).html(response[1]);
												$("#like" + comm).css('color', 'blue');
												$("#dislike" + comm).css('color', 'grey');
											})
										})
									});
								</script>
							}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	</div>
	<script>
        var urlPost = "@routes.CommentController.validateFormComment()";
    </script>
	<script src="@routes.Assets.versioned("javascripts/validateForm.js")" type="text/javascript"></script>
}
